(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{9980:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>y});var s=r(95155),t=r(12115),n=r(64032),l=r(69074),c=r(66932),o=r(66474),i=r(47924);let m=r(43653),d=(()=>{let e="super_category,category,sub_category,vertical\nCE,Camera,Camera,Camcorders\nCE,Camera,Camera,DSLR\nCE,Camera,Camera,Instant Cameras\nCE,Camera,Camera,Point & Shoot\nCE,Camera,Camera,SportsAndAction\nCE,CameraAccessory,CameraAccessory,Binoculars\nCE,CameraAccessory,CameraAccessory,CameraAccessory\nCE,CameraAccessory,CameraAccessory,CameraBag\nCE,CameraAccessory,CameraAccessory,CameraBattery\nCE,CameraAccessory,CameraAccessory,CameraBatteryCharger\nCE,CameraAccessory,CameraAccessory,CameraBatteryGrip\nCE,CameraAccessory,CameraAccessory,CameraEyeCup\nCE,CameraAccessory,CameraAccessory,CameraFilmRolls\nCE,CameraAccessory,CameraAccessory,CameraHousing\nCE,CameraAccessory,CameraAccessory,CameraLEDLight\nCE,CameraAccessory,CameraAccessory,CameraMicrophone\nCE,CameraAccessory,CameraAccessory,CameraMount\nCE,CameraAccessory,CameraAccessory,CameraRemoteControl\nCE,CameraAccessory,CameraAccessory,CameraTripod\nCE,CameraAccessory,CameraAccessory,ExtensionTube\nCE,CameraAccessory,CameraAccessory,Filter\nCE,CameraAccessory,CameraAccessory,Flash\nCE,CameraAccessory,CameraAccessory,FlashShoeAdapter\nCE,CameraAccessory,CameraAccessory,Lens\nCE,CameraAccessory,CameraAccessory,ReflectorUmbrella\nCE,CameraAccessory,CameraAccessory,Softbox\nCE,CameraAccessory,CameraAccessory,Strap\nCE,CameraAccessory,CameraAccessory,Teleconverter\nCE,CameraAccessory,CameraAccessory,Telescope\nCE,CameraAccessory,CameraStorage,CameraStorageMemoryCard\nCE,EntertainmentSmall,AmplifierReceiver,AmplifierReceiver\nCE,EntertainmentSmall,AudioAccessory,Microphone\nCE,EntertainmentSmall,AudioAccessory,MicrophoneAccessory\nCE,EntertainmentSmall,AudioMP3Player,AudioMP3Player\nCE,EntertainmentSmall,HomeAudio,BoomBox\nCE,EntertainmentSmall,HomeAudio,DJController\nCE,EntertainmentSmall,HomeAudio,Dock\nCE,EntertainmentSmall,HomeAudio,DockingStation\nCE,EntertainmentSmall,HomeAudio,FMRadio\nCE,EntertainmentSmall,HomeAudio,HiFiSystem\nCE,EntertainmentSmall,HomeAudio,HomeAudioSpeaker\nCE,EntertainmentSmall,HomeAudio,KaraokePlayer\nCE,EntertainmentSmall,HomeAudio,SlingBox\nCE,EntertainmentSmall,HomeAudio,SoundMixer\nCE,EntertainmentSmall,HomeAudio,VoiceRecorder\nCE,EntertainmentSmall,HomeTheatre,HomeTheatre\nCE,EntertainmentSmall,Speaker,\\N\nCE,EntertainmentSmall,Speaker,LaptopSpeaker\nCE,EntertainmentSmall,Speaker,MobileSpeaker\nCE,EntertainmentSmall,TVVideoSmall,RemoteControl\nCE,EntertainmentSmall,TVVideoSmall,SelectorBox\nCE,EntertainmentSmall,TVVideoSmall,VideoGlasses\nCE,EntertainmentSmall,TVVideoSmall,VideoPlayer\nCE,GameCDDVD,Game,CodeInTheBoxGame\nCE,GameCDDVD,Game,PhysicalGame\nCE,GameCDDVD,GameMembershipCards,GameValueCards\nCE,GamingHardware,GamingAccessory,CoolingPad\nCE,GamingHardware,GamingAccessory,GameControlMount\nCE,GamingHardware,GamingAccessory,GamePad\nCE,GamingHardware,GamingAccessory,GamingAccessoryKit\nCE,GamingHardware,GamingAccessory,GamingAdapter\nCE,GamingHardware,GamingAccessory,GamingChargingStation\nCE,GamingHardware,GamingAccessory,GamingGun\nCE,GamingHardware,GamingAccessory,GamingHeadset\nCE,GamingHardware,GamingAccessory,GamingKeyboard\nCE,GamingHardware,GamingAccessory,GamingMemoryCard\nCE,GamingHardware,GamingAccessory,GamingMouse\nCE,GamingHardware,GamingAccessory,GamingMousePad\nCE,GamingHardware,GamingAccessory,GamingSpeaker\nCE,GamingHardware,GamingAccessory,JoystickGamingWheel\nCE,GamingHardware,GamingAccessory,MotionController\nCE,GamingHardware,GamingAccessory,TVOutCableAccessory\nCE,GamingHardware,GamingConsole,GamingConsole\nCE,GamingHardware,GamingConsole,HandheldGamingConsole".split("\n").slice(1),a=[...new Set(e.map(e=>e.split(",")[1]))],r={};a.forEach(a=>{r[a]=[...new Set(e.filter(e=>e.split(",")[1]===a).map(e=>e.split(",")[2]))]});let s={};return a.forEach(a=>{s[a]={},r[a].forEach(r=>{s[a][r]=[...new Set(e.filter(e=>e.split(",")[1]===a&&e.split(",")[2]===r).map(e=>e.split(",")[3]))]})}),{categories:a,subcategories:r,verticalMap:s}})();function g(e){let{data:a}=e,r=Math.max(...a),t=Math.min(...a),n=r-t,l=a.every(e=>0===e);return(0,s.jsx)("div",{className:"w-20 h-8",children:(0,s.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 70 30",children:l?(0,s.jsx)("line",{x1:"0",y1:"25",x2:"70",y2:"25",stroke:"#d1d5db",strokeWidth:"2"}):a.map((e,a)=>{let r=0===n?15*(e>0):(e-t)/n*20;return(0,s.jsx)("rect",{x:10*a,y:30-r,width:"8",height:r||0,fill:"#4f46e5",opacity:.7+.05*a,rx:"1"},a)})})})}function y(){let[e,a]=(0,t.useState)("2023-07-16"),[r,y]=(0,t.useState)("2023-07-25"),[x,C]=(0,t.useState)("Camera"),[h,p]=(0,t.useState)("Camera"),[u,b]=(0,t.useState)("Camcorders"),[A,E]=(0,t.useState)(""),[j,f]=(0,t.useState)([]),[v,N]=(0,t.useState)(1),[S,w]=(0,t.useState)(10),[G,H]=(0,t.useState)([]),[_,P]=(0,t.useState)(!1),M=d.subcategories[x]||[];(0,t.useEffect)(()=>{if(x&&h){var e;let a=(null===(e=d.verticalMap[x])||void 0===e?void 0:e[h])||[];f(a),a.length>0&&!a.includes(u)&&b(a[0])}},[x,h,u]);let k=G.filter(e=>e.fsn_id.toLowerCase().includes(A.toLowerCase())),D=Math.ceil(k.length/S),V=(v-1)*S,L=V+S,T=k.slice(V,L),B=e=>{e<1||e>D||N(e)},F=async()=>{P(!0);try{console.log("Applying filters:",{category:x,sub_category:h,vertical:u,start_date:e,end_date:r});let a=await m.post("https://gcdata-753048278340.us-central1.run.app/get_details",{category:x,sub_category:h,vertical:u,start_date:e,end_date:r},{headers:{"Content-Type":"application/json"}});console.log("API Response:",a.data);let s=Object.entries(a.data).map(e=>{let[a,r]=e;return{fsn_id:a,totalSales:r.Total_sales||0,units:r.total_units||0,avgSLA:"NA"===r.avg_sla?"N/A":r.avg_sla,codPercentage:r.total_cod>0?Math.round(r.total_cod/(r.total_cod+r.total_prepaid)*100):0,prepaidPercentage:r.total_prepaid>0?Math.round(r.total_prepaid/(r.total_cod+r.total_prepaid)*100):0,last7Days:r.last_week||[0,0,0,0,0,0,0,0]}});H(s),N(1)}catch(e){console.error("Error fetching data:",e),alert("Error fetching data. Please try again.")}finally{P(!1)}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Details"})}),(0,s.jsxs)(n.Zp,{className:"p-4 bg-white shadow-sm rounded-lg",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1.5",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"})," Start Date"]}),(0,s.jsx)("input",{type:"date",value:e,onChange:e=>a(e.target.value),className:"w-full text-sm p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1.5",children:[(0,s.jsx)(l.A,{className:"h-4 w-4"})," End Date"]}),(0,s.jsx)("input",{type:"date",value:r,onChange:e=>y(e.target.value),className:"w-full text-sm p-2 border border-gray-300 rounded"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1.5",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"})," Category"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("select",{value:x,onChange:e=>{let a=e.target.value;C(a),p(d.subcategories[a][0]||"")},className:"w-full text-sm p-2 border border-gray-300 rounded appearance-none pr-8",children:d.categories.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(o.A,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1.5",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"})," Subcategory"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full text-sm p-2 border border-gray-300 rounded appearance-none pr-8",children:M.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(o.A,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"})]})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-1.5",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"})," Vertical"]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("select",{value:u,onChange:e=>b(e.target.value),className:"w-full text-sm p-2 border border-gray-300 rounded appearance-none pr-8",children:j.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsx)(o.A,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-500"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,s.jsxs)("div",{className:"relative w-64",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search by FSN ID...",value:A,onChange:e=>E(e.target.value),className:"w-full text-sm p-2 pl-8 border border-gray-300 rounded"}),(0,s.jsx)(i.A,{className:"absolute left-2.5 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"})]}),(0,s.jsx)("button",{onClick:F,disabled:_,className:"text-sm bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition-colors ".concat(_?"opacity-70 cursor-not-allowed":""),children:_?"Loading...":"Apply Filters"})]})]}),(0,s.jsxs)(n.Zp,{className:"p-4 bg-white shadow-sm rounded-lg overflow-hidden",children:[(0,s.jsx)("h2",{className:"text-base font-medium text-gray-700 mb-4",children:"Product Performance"}),G.length>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50",children:[(0,s.jsx)("th",{className:"px-4 py-2.5 text-left font-medium text-gray-600 border-b",children:"FSN ID"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-right font-medium text-gray-600 border-b",children:"Total Sales"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-right font-medium text-gray-600 border-b",children:"Units"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-right font-medium text-gray-600 border-b",children:"Avg. SLA"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-center font-medium text-gray-600 border-b",children:"%COD | %Prepaid"}),(0,s.jsx)("th",{className:"px-4 py-2.5 text-center font-medium text-gray-600 border-b",children:"Last 7 Days"})]})}),(0,s.jsx)("tbody",{children:T.map((e,a)=>(0,s.jsxs)("tr",{className:a%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-2.5 border-b border-gray-100 font-medium",children:e.fsn_id}),(0,s.jsxs)("td",{className:"px-4 py-2.5 border-b border-gray-100 text-right",children:["$",e.totalSales.toLocaleString()]}),(0,s.jsx)("td",{className:"px-4 py-2.5 border-b border-gray-100 text-right",children:e.units.toLocaleString()}),(0,s.jsx)("td",{className:"px-4 py-2.5 border-b border-gray-100 text-right",children:"string"==typeof e.avgSLA?e.avgSLA:"".concat(e.avgSLA," days")}),(0,s.jsx)("td",{className:"px-4 py-2.5 border-b border-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-1",children:0===e.codPercentage&&0===e.prepaidPercentage?(0,s.jsx)("div",{className:"bg-gray-400 h-2 rounded-full w-full"}):(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-l-full",style:{width:"".concat(e.codPercentage,"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(0===e.codPercentage?"text-gray-400":"text-blue-600"),children:[e.codPercentage,"%"]}),(0,s.jsxs)("span",{className:"text-xs font-medium ".concat(0===e.prepaidPercentage?"text-gray-400":"text-green-600"),children:[e.prepaidPercentage,"%"]})]})]})}),(0,s.jsx)("td",{className:"px-4 py-2.5 border-b border-gray-100 flex justify-center",children:(0,s.jsx)(g,{data:e.last7Days})})]},a))})]})}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4 text-sm text-gray-500",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{children:["Showing ",V+1,"-",Math.min(L,k.length)," of ",k.length," products"]}),(0,s.jsxs)("div",{className:"flex items-center ml-4",children:[(0,s.jsx)("span",{className:"mr-2",children:"Rows:"}),(0,s.jsxs)("select",{value:S,onChange:e=>{w(Number(e.target.value)),N(1)},className:"border rounded px-2 py-1 text-sm",children:[(0,s.jsx)("option",{value:5,children:"5"}),(0,s.jsx)("option",{value:10,children:"10"}),(0,s.jsx)("option",{value:15,children:"15"}),(0,s.jsx)("option",{value:20,children:"20"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{className:"px-3 py-1.5 border rounded ".concat(1===v?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-50 hover:bg-gray-100"),onClick:()=>B(v-1),disabled:1===v,children:"Previous"}),Array.from({length:Math.min(D,3)},(e,a)=>{let r=a+1;return v>2&&D>3&&(r=v-1+a)>D&&(r=D-(2-a)),(0,s.jsx)("button",{className:"px-3 py-1.5 border rounded ".concat(v===r?"bg-blue-50 text-blue-600 border-blue-200":"hover:bg-gray-100"),onClick:()=>B(r),children:r},a)}),(0,s.jsx)("button",{className:"px-3 py-1.5 border rounded ".concat(v===D?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-gray-50 hover:bg-gray-100"),onClick:()=>B(v+1),disabled:v===D,children:"Next"})]})]})]}):(0,s.jsx)("div",{className:"py-8 text-center text-gray-500",children:'Click "Apply Filters" to load data'})]})]})}},43546:(e,a,r)=>{Promise.resolve().then(r.bind(r,9980))},64032:(e,a,r)=>{"use strict";r.d(a,{Zp:()=>l});var s=r(95155);r(12115);var t=r(52596),n=r(39688);function l(e){let{className:a,...r}=e;return(0,s.jsx)("div",{"data-slot":"card",className:function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return(0,n.QP)((0,t.$)(a))}("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}}},e=>{var a=a=>e(e.s=a);e.O(0,[598,205,441,684,358],()=>a(43546)),_N_E=e.O()}]);