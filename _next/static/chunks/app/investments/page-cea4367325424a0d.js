(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[691],{17326:(e,s,t)=>{"use strict";t.d(s,{Zp:()=>l});var a=t(95155);t(12115);var r=t(52596),n=t(39688);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,n.QP)((0,r.$)(s))}("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}},33656:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>M});var a=t(95155),r=t(12115),n=t(17326),l=t(42355),d=t(13052),i=t(54416),c=t(55868),o=t(84616),m=t(33109),x=t(53231),h=t(32944),g=t(80079),u=t(80520),p=t(3898),b=t(16694),y=t(70542),j=t(37223),f=t(48882);let v={HOLIDAY:{name:"Holiday",color:"bg-red-500"},SALE_DAY:{name:"Sale Day",color:"bg-blue-500"},PAY_DAY:{name:"Pay Day",color:"bg-green-500"}},N=[{id:"TV",name:"TV Advertising",description:"Television commercials and sponsorships"},{id:"Digital",name:"Digital Advertising",description:"Online display and video ads"},{id:"Sponsorship",name:"Sponsorships",description:"Event and content sponsorships"},{id:"ContentMarketing",name:"Content Marketing",description:"Blog posts, videos, infographics"},{id:"OnlineMarketing",name:"Online Marketing",description:"Social media and email campaigns"},{id:"Affiliates",name:"Affiliate Marketing",description:"Commission-based partnerships"},{id:"SEM",name:"Search Engine Marketing",description:"Google Ads, Bing Ads"},{id:"Other",name:"Other Channels",description:"PR, events, and miscellaneous"}],w=e=>{let{currentDate:s,events:t,onPrevMonth:r,onNextMonth:n}=e,i=(0,x.w)(s),c=(0,h.p)(s),o=(0,g.k)({start:i,end:c}),m=e=>t.filter(s=>s.isRange&&s.startDate&&s.endDate?(0,u.v)(e,{start:new Date(s.startDate),end:new Date(s.endDate)}):!!s.date&&(0,p.r)(e,new Date(s.date)));return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 bg-gray-50",children:[(0,a.jsx)("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-200 transition-colors","aria-label":"Previous month",children:(0,a.jsx)(l.A,{className:"h-5 w-5 text-gray-600"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:(0,b.GP)(s,"MMMM yyyy")}),(0,a.jsx)("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-200 transition-colors","aria-label":"Next month",children:(0,a.jsx)(d.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("div",{className:"grid grid-cols-7 mb-3",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:e},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:i.getDay()}).map((e,s)=>(0,a.jsx)("div",{className:"h-12 rounded-md"},"empty-start-".concat(s))),o.map(e=>{let t=m(e),r=t.length>0;return(0,a.jsxs)("div",{className:"h-12 rounded-md flex flex-col items-center justify-center relative border ".concat((0,y.t)(e,s)?r?"border-gray-200 bg-gray-50":"border-gray-100 hover:bg-gray-50":"text-gray-300 border-transparent"),children:[(0,a.jsx)("span",{className:"text-sm ".concat(r?"font-medium":""),children:(0,b.GP)(e,"d")}),r&&(0,a.jsx)("div",{className:"flex mt-1 space-x-1",children:t.map((e,s)=>(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(v[e.type].color),title:v[e.type].name},"event-".concat(s)))})]},e.toString())}),Array.from({length:6-c.getDay()}).map((e,s)=>(0,a.jsx)("div",{className:"h-12 rounded-md"},"empty-end-".concat(s)))]})]})]})},D=e=>{let{isOpen:s,onClose:t,onAddEvent:n}=e,[l,d]=(0,r.useState)("HOLIDAY"),[c,o]=(0,r.useState)(!1),[m,x]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[u,p]=(0,r.useState)("");return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Add Event"}),(0,a.jsx)("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close",children:(0,a.jsx)(i.A,{className:"h-5 w-5 text-gray-600"})})]}),(0,a.jsx)("form",{onSubmit:e=>{e.preventDefault(),n(c?{type:l,isRange:c,startDate:h,endDate:u}:{type:l,isRange:c,date:m}),t(),d("HOLIDAY"),o(!1),x(""),g(""),p("")},children:(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Type"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:Object.entries(v).map(e=>{let[s,{name:t,color:r}]=e;return(0,a.jsxs)("label",{className:"flex items-center p-3 rounded-md border cursor-pointer transition-colors ".concat(l===s?"".concat(r.replace("bg-","border-")," bg-opacity-10 ").concat(r.replace("bg-","bg-")):"border-gray-200 hover:bg-gray-50"),children:[(0,a.jsx)("input",{type:"radio",name:"eventType",value:s,checked:l===s,onChange:()=>d(s),className:"sr-only"}),(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(r," mr-2")}),(0,a.jsx)("span",{className:"text-sm",children:t})]},s)})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Type"}),(0,a.jsxs)("div",{className:"flex space-x-6",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"dateType",checked:!c,onChange:()=>o(!1),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Single Day"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"dateType",checked:c,onChange:()=>o(!0),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Date Range"})]})]})]}),c?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,a.jsx)("input",{type:"date",id:"startDate",value:h,onChange:e=>g(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"endDate",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,a.jsx)("input",{type:"date",id:"endDate",value:u,onChange:e=>p(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",required:!0})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,a.jsx)("input",{type:"date",id:"date",value:m,onChange:e=>x(e.target.value),className:"w-full p-2.5 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",required:!0})]}),(0,a.jsxs)("div",{className:"flex justify-end pt-5",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 mr-3",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700",children:"Add Event"})]})]})})]})}):null},A=e=>{let{value:s,onChange:t}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center mr-3",children:(0,a.jsx)(c.A,{className:"h-5 w-5 text-green-600"})}),(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Investment Amount"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("span",{className:"text-3xl font-bold text-gray-800",children:["$",s.toFixed(2)]})}),(0,a.jsx)("input",{type:"range",min:"1000",max:"100000",step:"100",value:s,onChange:e=>t(Number.parseFloat(e.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-green-500"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 font-medium",children:[(0,a.jsx)("span",{children:"$1,000"}),(0,a.jsx)("span",{children:"$100,000"})]})]})]})},S=e=>{let{onClick:s}=e;return(0,a.jsx)(n.Zp,{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 h-73 flex flex-col justify-center items-center cursor-pointer hover:bg-gray-50 transition-colors",onClick:s,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:(0,a.jsx)(o.A,{className:"h-5 w-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-800",children:"Add Event"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Schedule holidays, sale days, and paydays"})]})]})})},k=e=>{let{onClick:s}=e;return(0,a.jsxs)("button",{onClick:s,className:"w-full flex items-center justify-center px-4 py-4 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-colors",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 mr-3"}),(0,a.jsx)("span",{className:"text-lg font-medium",children:"Predict Distribution"})]})},C=()=>(0,a.jsxs)(n.Zp,{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:"Event Legend"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:Object.entries(v).map(e=>{let[s,{name:t,color:r}]=e;return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(r," mr-2")}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t})]},s)})})]}),E=e=>{let{stream:s,percentage:t,isHighest:r,investmentAmount:l}=e;return(0,a.jsx)(n.Zp,{className:"p-5 border ".concat(r?"border-green-300 bg-green-50":"border-gray-100"," rounded-xl transition-all hover:shadow-md h-full"),children:(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-base ".concat(r?"text-green-700":"text-gray-700"),children:s.name}),(0,a.jsxs)("span",{className:"text-xl font-bold ".concat(r?"text-green-600":"text-gray-800"),children:[t.toFixed(2),"%"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-4 flex-grow",children:s.description}),(0,a.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2.5 overflow-hidden",children:(0,a.jsx)("div",{className:"h-2.5 rounded-full ".concat(r?"bg-green-500":"bg-blue-400"),style:{width:"".concat(t,"%")}})}),(0,a.jsx)("div",{className:"mt-2 text-xs text-right",children:(0,a.jsxs)("span",{className:r?"text-green-600 font-medium":"text-gray-500",children:["$",(l*t/100).toFixed(2)]})})]})})};function M(){let[e,s]=(0,r.useState)(new Date),[t,n]=(0,r.useState)([]),[l,d]=(0,r.useState)(!1),[i,c]=(0,r.useState)(1e4),[o,m]=(0,r.useState)([]),[x,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)({month:new Date().getMonth()+1,holiday:[],salesday:[]});(0,r.useEffect)(()=>{let s=e.getMonth()+1,a=[],r=[];t.forEach(e=>{let s=e.date||"";if("HOLIDAY"===e.type&&s?a.push(s):"SALE_DAY"===e.type&&s&&r.push(s),e.isRange&&e.startDate&&e.endDate){let s=new Date(e.startDate),t=new Date(e.endDate);(0,g.k)({start:s,end:t}).forEach(s=>{let t=(0,b.GP)(s,"yyyy-MM-dd");"HOLIDAY"===e.type?a.push(t):"SALE_DAY"===e.type&&r.push(t)})}}),p({month:s,holiday:a,salesday:r})},[t,e]);let y=async()=>{try{let e=await fetch("https://gcdata-753048278340.us-central1.run.app/calculate_month_investment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});if(!e.ok)throw Error("Error: ".concat(e.status));let s=await e.json(),t=Object.entries(s).map(e=>{let[s,t]=e;return{id:s,percentage:100*t}});m(t),h(!0)}catch(e){console.error("Failed to predict distribution:",e)}},v=x?Math.max(...o.map(e=>e.percentage)):0;return(0,a.jsxs)("div",{className:"space-y-4 pb-6 max-w-8xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Investment Planner"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:["Month: ",u.month,", Holidays: ",u.holiday.length,", Sales Days: ",u.salesday.length]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(S,{onClick:()=>d(!0)}),(0,a.jsx)(A,{value:i,onChange:c}),(0,a.jsx)(k,{onClick:y})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsx)(w,{currentDate:e,events:t,onPrevMonth:()=>{s((0,j.a)(e,1))},onNextMonth:()=>{s((0,f.P)(e,1))}}),(0,a.jsx)(C,{})]})]}),x&&(0,a.jsxs)("div",{className:"mt-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Recommended Investment Distribution"}),(0,a.jsxs)("div",{className:"text-sm font-medium bg-green-50 text-green-700 px-3 py-1 rounded-full border border-green-200",children:["Total: $",i.toFixed(2)]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:N.map(e=>{let s=o.find(s=>s.id===e.id),t=s?s.percentage:0;return(0,a.jsx)(E,{stream:e,percentage:t,isHighest:t===v,investmentAmount:i},e.id)})})]}),(0,a.jsx)(D,{isOpen:l,onClose:()=>d(!1),onAddEvent:e=>{n([...t,e])}})]})}},53838:(e,s,t)=>{Promise.resolve().then(t.bind(t,33656))}},e=>{var s=s=>e(e.s=s);e.O(0,[598,806,441,684,358],()=>s(53838)),_N_E=e.O()}]);